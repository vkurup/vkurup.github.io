<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

    
    
    
    <link href="//fonts.googleapis.com/css?family=Quattrocento:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Quattrocento+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    
    

    
    <title>Vinod Kurup</title>

    
    
    <link rel="stylesheet" href="/css/hugo-octopress.css">

    
    
    <link rel="stylesheet" href="/css/vinod.css">
    

    
    <link rel="stylesheet" href="/css/fork-awesome.min.css">
    

    
    <link href="/favicon.ico" rel="icon">

    
    <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Vinod Kurup" />

    <meta name="description" content="Inside Vinod Kurup&#39;s brain" />
    <meta name="keywords" content="">
    <meta name="author" content="Vinod Kurup, MD">

    
    <meta name="generator" content="Hugo 0.92.2" />

    
    

    
    
  </head>
  <body>

    
    <header role="banner">
<hgroup>
  
  <h1><a href="https://kurup.com/">Vinod Kurup</a></h1>
    <h2>Hospitalist/programmer in search of the meaning of life</h2>
</hgroup></header>

    
    <nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
    
    <option value="https://kurup.com/">» Blog</option>
    
    <option value="https://kurup.com/about/">» About Me</option>
    
    <option value="https://kurup.com/post/">» Archives</option>
    
    <option value="https://kurup.com/categories/">» Categories</option>
    
    <option value="https://kurup.com/medicine/">» Medicine</option>
    
    <option value="https://kurup.com/running/">» Running</option>
    
  </select>
</fieldset>


<ul class="main-navigation">
  
  
  
  <li><a href="https://kurup.com/" title="Blog">Blog</a></li>
  
  
  
  <li><a href="https://kurup.com/about/" title="About Me" >About Me</a></li>
  
  
  
  <li><a href="https://kurup.com/post/" title="Archives" >Archives</a></li>
  
  
  
  <li><a href="https://kurup.com/categories/" title="Categories" >Categories</a></li>
  
  
  
  <li><a href="https://kurup.com/medicine/" title="Medicine" >Medicine</a></li>
  
  
  
  <li><a href="https://kurup.com/running/" title="Running" >Running</a></li>
  
  
</ul>

<ul class="subscription">
  
  
  <a href="https://kurup.com/index.xml" target="_blank" type="application/rss+xml" title="RSS"><i class="fa fa-rss fa-lg"></i></a>
  
  
</ul>


<form action="https://www.google.com/search" method="get" target="_blank">
  <fieldset role="search">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
    <input type="hidden" name="q" value="site:https://kurup.com/" />
  </fieldset>
</form>

</nav>




  

<div id="main">
  <div id="content">
    <div class="blog-index">
      
      
      <article>
        
        

<header>
  <p class="meta">May 9, 2021
     - 2 minute read 
     - <a href="https://kurup.com/blog/2021/05/09/first-post-of-2021/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/life/">life </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2021/05/09/first-post-of-2021/">First Post of 2021</a>
  </h1>
</header>

        
          <p>Hi loyal reader(s)! It is nearly halfway through 2021 and this is my first post of the
year. And writing on this here blog was one of my 2021 resolutions, so I guess that was
a complete failure. Although, maybe I can make up for it by actually writing more
regularly over the next few months. It has been a whirlwind of a year for just about
everyone, right? When the pandemic started, I remember making a list of the things that
I might want to blog about and the only thing I remember from that list was that I
wanted to blog about &ldquo;not wanting to blog about the pandemic&rdquo;. It was just too
exhausting to think about. And I think I still feel that way. I have written some
private thoughts about things, but I&rsquo;ll leave them under wraps.</p>
<p>The biggest change in my life is that I am starting a new job tomorrow. I&rsquo;ll be a
Software Engineer at Kevel, programming in Clojure (among other languages). I&rsquo;ve been
infatuated with Clojure (and functional programming in general) for a long time, so I am
beyond excited to be able to use it professionally. This is also the first job that I&rsquo;ll
be starting as a &ldquo;remote-only&rdquo; worker. Normally, I&rsquo;d walk into the office and introduce
myself to someone and then start to get oriented. It will be weird to do that via an
online chat of some sort. Am I showing my age?</p>
<p>What else is going on? Well I&rsquo;m not going to talk about the pandemic, but I do encourage
people to go <a href="https://aif.org/donate/covid-19-response/">help out people in India</a> (or
wherever else people need help.) We are luckily healthy and vaccinated. The kids have
survived remote schooling and two of them have returned to school partly in-person. I&rsquo;ve
been running and meditating and gardening, all with minimal success.</p>
<p>So, what is up with you all? Hope to write again before the end of the year.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Dec 12, 2020
     - 2 minute read 
     - <a href="https://kurup.com/blog/2020/12/12/advent-of-code-elixir-day-1/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/programming/">programming </a><a class="label" href="https://kurup.com/categories/elixir/">elixir </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2020/12/12/advent-of-code-elixir-day-1/">Advent of Code Elixir Day 1</a>
  </h1>
</header>

        
          <p>There&rsquo;s this cool thing called Advent of Code, described best
<a href="https://adventofcode.com/2020/about">here</a>. I found out about it while reading my
<a href="https://cpbotha.net/2020/12/12/weekly-head-voices-211-table-mountain-run-ish/">favorite weekly weblog</a>
and so I&rsquo;ve decided to try my fledgling (maybe flailing is a better word?) Elixir skills
on it. There are 2 puzzles each day (<code>day_1_0</code> and <code>day_1_1</code> are my solutions). Here&rsquo;s
my code for Day 1:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-elixir" data-lang="elixir">  @doc <span style="color:#2aa198">&#34;&#34;&#34;
</span><span style="color:#2aa198">  Find 2 numbers in file that sum to 2020 and return their product.
</span><span style="color:#2aa198">
</span><span style="color:#2aa198">      iex&gt; Aoc.day_1_0()
</span><span style="color:#2aa198">      633216
</span><span style="color:#2aa198">  &#34;&#34;&#34;</span>
  <span style="color:#268bd2">def</span> day_1_0 <span style="color:#719e07">do</span>
    goal <span style="color:#719e07">=</span> <span style="color:#2aa198">2020</span>
    list_of_nums <span style="color:#719e07">=</span> get_list_of_nums()

    first_num <span style="color:#719e07">=</span> find_first_partner(list_of_nums, goal)
    first_num <span style="color:#719e07">*</span> (goal <span style="color:#719e07">-</span> first_num)
  <span style="color:#719e07">end</span>

  @doc <span style="color:#2aa198">&#34;&#34;&#34;
</span><span style="color:#2aa198">  Find 3 numbers in file that sum to 2020 and return their product.
</span><span style="color:#2aa198">
</span><span style="color:#2aa198">      iex&gt; Aoc.day_1_1()
</span><span style="color:#2aa198">      68348924
</span><span style="color:#2aa198">  &#34;&#34;&#34;</span>
  <span style="color:#268bd2">def</span> day_1_1 <span style="color:#719e07">do</span>
    goal <span style="color:#719e07">=</span> <span style="color:#2aa198">2020</span>
    list_of_nums <span style="color:#719e07">=</span> get_list_of_nums()

    <span style="color:#586e75"># find first number where there exists 2 other numbers that sum to `goal - x`</span>
    first_num <span style="color:#719e07">=</span> <span style="color:#268bd2">Enum</span><span style="color:#719e07">.</span>find(list_of_nums, <span style="color:#719e07">fn</span> x <span style="color:#719e07">-&gt;</span> find_first_partner(list_of_nums, goal <span style="color:#719e07">-</span> x) <span style="color:#719e07">end</span>)
    second_num <span style="color:#719e07">=</span> find_first_partner(list_of_nums, goal <span style="color:#719e07">-</span> first_num)

    first_num <span style="color:#719e07">*</span> second_num <span style="color:#719e07">*</span> (goal <span style="color:#719e07">-</span> first_num <span style="color:#719e07">-</span> second_num)
  <span style="color:#719e07">end</span>

  @doc <span style="color:#2aa198">&#34;&#34;&#34;
</span><span style="color:#2aa198">  Given a `list` of integers, return the first number in that list which has a
</span><span style="color:#2aa198">  partner in the list that sums to `goal`.
</span><span style="color:#2aa198">  &#34;&#34;&#34;</span>
  <span style="color:#268bd2">def</span> find_first_partner(list, goal) <span style="color:#719e07">do</span>
    <span style="color:#268bd2">Enum</span><span style="color:#719e07">.</span>find(list, <span style="color:#719e07">fn</span> x <span style="color:#719e07">-&gt;</span> <span style="color:#268bd2">Enum</span><span style="color:#719e07">.</span>member?(list, goal <span style="color:#719e07">-</span> x) <span style="color:#719e07">end</span>)
  <span style="color:#719e07">end</span>

  <span style="color:#268bd2">defp</span> get_file <span style="color:#719e07">do</span>
    <span style="color:#268bd2">Path</span><span style="color:#719e07">.</span>join(<span style="color:#2aa198">&#34;data&#34;</span>, <span style="color:#2aa198">&#34;day1.txt&#34;</span>) <span style="color:#719e07">|&gt;</span> <span style="color:#268bd2">File</span><span style="color:#719e07">.</span>read!()
  <span style="color:#719e07">end</span>

  <span style="color:#268bd2">defp</span> get_list_of_nums <span style="color:#719e07">do</span>
    <span style="color:#586e75"># Split into lines, filter out empty lines, convert each to an integer</span>
    get_file()
    <span style="color:#719e07">|&gt;</span> <span style="color:#268bd2">String</span><span style="color:#719e07">.</span>split(<span style="color:#2aa198">&#34;</span><span style="color:#cb4b16">\n</span><span style="color:#2aa198">&#34;</span>)
    <span style="color:#719e07">|&gt;</span> <span style="color:#268bd2">Enum</span><span style="color:#719e07">.</span>filter(<span style="color:#719e07">fn</span> x <span style="color:#719e07">-&gt;</span> <span style="color:#268bd2">String</span><span style="color:#719e07">.</span>trim(x) <span style="color:#719e07">!=</span> <span style="color:#2aa198">&#34;&#34;</span> <span style="color:#719e07">end</span>)
    <span style="color:#719e07">|&gt;</span> <span style="color:#268bd2">Enum</span><span style="color:#719e07">.</span>map(<span style="color:#719e07">&amp;</span><span style="color:#268bd2">String</span><span style="color:#719e07">.</span>to_integer<span style="color:#719e07">/</span><span style="color:#2aa198">1</span>)
  <span style="color:#719e07">end</span>
</code></pre></div><p>The code is also available in Github, which I&rsquo;ll update if I do find time to keep going:
<a href="https://github.com/vkurup/aoc-elixir/">https://github.com/vkurup/aoc-elixir/</a> I feel like this could have been done more
efficiently with recursion, but I am not comfortable enough with recursion to know
how&hellip;</p>
<p>A sincere thanks to <a href="http://was.tl/">Eric Wastl</a> for spending the enormous time and energy
to create cool puzzles like this.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Dec 11, 2020
     - 2 minute read 
     - <a href="https://kurup.com/blog/2020/12/11/install-multiple-python-versions-using-pyenv/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/cheatsheet/">cheatsheet </a><a class="label" href="https://kurup.com/categories/python/">python </a><a class="label" href="https://kurup.com/categories/linux/">linux </a><a class="label" href="https://kurup.com/categories/bash/">bash </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2020/12/11/install-multiple-python-versions-using-pyenv/">Install multiple python versions using pyenv</a>
  </h1>
</header>

        
          <p><a href="https://github.com/pyenv/pyenv">pyenv</a> is awesome and has changed the way that I manage
my Python environments. One tiny annoyance is that it takes a looong time to install
each Python version, which of course makes sense, since it has to download and compile
each version on your machine. But it&rsquo;s not a big deal, since you generally just do this
once and then not again until you really need to upgrade to a different Python version.</p>
<p>Recently, though, I was working on a project that uses tox to make sure that the project
runs on multiple Python versions, in this case 3.6, 3.7, 3.8, 3.9. The specific versions
were included in the <code>.python-version</code> file, which looked like this:</p>
<pre tabindex="0"><code>3.9.0
3.8.6
3.7.9
3.6.12
</code></pre><p>I didn&rsquo;t have all of these installed, so rather than doing <code>pyenv install 3.9.0</code> and
then waiting a few minutes, and then repeating the process for each version, I wrote up
this little script, which I named <code>pyinstall.sh</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#719e07">#!/bin/bash
</span><span style="color:#719e07"></span><span style="color:#586e75"># Install all versions specified in .python-version</span>
<span style="color:#b58900">set</span> -ex

<span style="color:#719e07">while</span> <span style="color:#b58900">read</span> version; <span style="color:#719e07">do</span>
    pyenv install -s <span style="color:#2aa198">&#34;</span><span style="color:#268bd2">$version</span><span style="color:#2aa198">&#34;</span>
<span style="color:#719e07">done</span> &lt;.python-version
</code></pre></div><p>Since <code>pyenv</code> is nice enough to include the <code>-s</code> flag which means &ldquo;skip if already
installed&rdquo;, this can be run as many times as you want and it will only install the
version if it&rsquo;s not already installed</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Dec 10, 2020
     - 1 minute read 
     - <a href="https://kurup.com/blog/2020/12/10/disk-space-hogs/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/cheatsheet/">cheatsheet </a><a class="label" href="https://kurup.com/categories/ubuntu/">ubuntu </a><a class="label" href="https://kurup.com/categories/linux/">linux </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2020/12/10/disk-space-hogs/">Disk Space Hogs</a>
  </h1>
</header>

        
          <p>Find disk space hogs:</p>
<pre tabindex="0"><code>sudo du -h -d 3 / | grep &quot;^[0-9.]*G&quot;
</code></pre><p>&hellip; which helped me find the command in
<a href="/blog/2020/12/09/deleting-old-snaps/">yesterday&rsquo;s post</a>. You can add directories
after the slash to drill down to your heart&rsquo;s content.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Dec 9, 2020
     - 1 minute read 
     - <a href="https://kurup.com/blog/2020/12/09/deleting-old-snaps/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/cheatsheet/">cheatsheet </a><a class="label" href="https://kurup.com/categories/ubuntu/">ubuntu </a><a class="label" href="https://kurup.com/categories/linux/">linux </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2020/12/09/deleting-old-snaps/">Deleting old snaps</a>
  </h1>
</header>

        
          <p>Copy this script into <code>~/bin/</code>:</p>
<pre tabindex="0"><code>#!/bin/bash
# Removes old revisions of snaps
# CLOSE ALL SNAPS BEFORE RUNNING THIS
set -ex

LANG=en_US.UTF-8 snap list --all | awk '/disabled/{print $1, $3}' |
    while read snapname revision; do
        sudo snap remove &quot;$snapname&quot; --revision=&quot;$revision&quot;
    done
</code></pre><p>Found on
<a href="https://www.linuxuprising.com/2019/04/how-to-remove-old-snap-versions-to-free.html">https://www.linuxuprising.com/2019/04/how-to-remove-old-snap-versions-to-free.html</a> and
slightly edited.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Aug 21, 2020
     - 2 minute read 
     - <a href="https://kurup.com/blog/2020/08/21/using-an-obi110-for-voip-service/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/homelab/">homelab </a><a class="label" href="https://kurup.com/categories/phone/">phone </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2020/08/21/using-an-obi110-for-voip-service/">Using an OBi110 for VOIP service</a>
  </h1>
</header>

        
          <p><a href="https://www.amazon.com/Obihai-OBi110-Service-Telephone-Adapter/dp/B0045RMEPI/ref=as_li_ss_il?cv_ct_cx=obi110&dchild=1&keywords=obi110&pd_rd_i=B0045RMEPI&pd_rd_r=a3b6c935-3201-4201-bbc6-7d29bbd1c366&pd_rd_w=Ef8IC&pd_rd_wg=nizgM&pf_rd_p=13bf9bc7-d68d-44c3-9d2e-647020f56802&pf_rd_r=A41ZB6SM3B7MVPHCSCCT&psc=1&qid=1598054979&sr=1-1-791c2399-d602-4248-afbb-8a79de2d236f&linkCode=li3&tag=vinodkurupshomep&linkId=235aa511a32550f5368ef9f5910b2806&language=en_US" target="_blank"><img border="0" src="https://ws-na.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B0045RMEPI&Format=_SL250_&ID=AsinImage&MarketPlace=US&ServiceVersion=20070822&WS=1&tag=vinodkurupshomep&language=en_US" ></a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=vinodkurupshomep&language=en_US&l=li3&o=1&a=B0045RMEPI" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p>
<p>I set up an OBi110 device to provide a landline at home. OK, it&rsquo;s not a land line, it&rsquo;s
a VOIP (Voice Over Internet Protocol) line, but it performs a similar function. We&rsquo;ve
always had a landline. Our cell phone coverage is spotty at times and ever since Mala
started working from home, she needs to have a reliable phone line for her global
conference calls.</p>
<p>The problem is that Spectrum was charging us $44.95 per month plus taxes, which took it
near $50 every month. I considered a few options including:</p>
<ul>
<li>MagicJack</li>
<li>Ooma</li>
<li>I looked at a few others&hellip; can&rsquo;t remember them all</li>
</ul>
<p>In the end, I settled on buying an <a href="https://en.wikipedia.org/wiki/Analog_telephone_adapter">ATA device</a> and then connecting it
to a cheaper VOIP service. I chose <a href="https://voip.ms">voip.ms</a> which has been great so
far.</p>
<p>One Time Costs:</p>
<ul>
<li><a href="https://amzn.to/2EivFuP">OBi110</a> ATA device: $19.90</li>
<li>voip.ms setup fee: $0.40</li>
<li>voip.ms e911 setup fee: $1.50</li>
</ul>
<p>Monthly Costs:</p>
<ul>
<li>voip.ms fee for an incoming phone number: $0.85</li>
<li>voip.ms e911 monthly fee: $1.50</li>
</ul>
<p>Per-Minute Costs:</p>
<ul>
<li>voip.ms incoming: $0.009 per minute</li>
</ul>
<p>I&rsquo;ll have to keep an eye on my monthly per-minute costs because there is an unlimited
plan that is $4.25 per month, which I&rsquo;ll switch to if I use more than that per month. In
any case, this is MUCH cheaper than Spectrum.</p>
<p>Now, if you do any research about the OBi110 device, you&rsquo;ll see everyone telling you not
to buy it because it is out of service and doesn&rsquo;t support Google Voice. This is true,
ObiTalk doesn&rsquo;t support the device anymore. When it was supported by the company, you
could just dial a special code on your phone and it would do all the set up for you.
Since it&rsquo;s not supported, that procedure doesn&rsquo;t work anymore. But you can <a href="https://wiki.voip.ms/article/OBi_100/110_%26_OBi_200">manually configure the device</a> with the
excellent docs from voip.ms, and for a geek like me that was not bad. And yes, you can&rsquo;t
link a Google Voice number to the device, but I didn&rsquo;t want to do that anyway. I think
if you wanted to keep using a google voice number, you could probably get pretty close
by putting a different number on your device (through voip.ms) and then pointing Google
Voice at that number. Incoming calls would work fine in that way, but I&rsquo;m not sure about
outgoing calls. If you want to seamlessly use Google Voice on an ATA device, then OBi110
isn&rsquo;t for you. You&rsquo;ll need the OBI202 (which was out of stock when I was looking).</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Aug 17, 2020
     - 2 minute read 
     - <a href="https://kurup.com/blog/2020/08/17/django-forms-have-2-modes/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/django/">django </a><a class="label" href="https://kurup.com/categories/programming/">programming </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2020/08/17/django-forms-have-2-modes/">Django forms have 2 modes</a>
  </h1>
</header>

        
          <p>I worked on adding tests to some Django forms today and I was reminded that Django forms
operate in two <em>modes</em>. I think of them as the GET mode and the POST mode. The GET mode
displays the form and the POST mode processes the data that you supply to the form. I
don&rsquo;t know why, but I often forget that. Instead, I sometimes treat them as a normal
Python class, especially when I&rsquo;m creating automated tests for them. I instantiate
the class (<code>form = MyForm()</code>) and then just call any of its methods and make sure they
return the right values or achieve the correct side effects. The form that I was working
with today had a couple features. The first was that it provided some helper functions
to the template so that the template could display the form properly. Those are in the
GET mode. So I did something like:</p>
<pre tabindex="0"><code>user = create_my_special_user()
form = MyForm(user=user)
self.assertTrue(form.is_user_special())
</code></pre><p>And that worked as I expected. The second feature of my custom form was that it cleaned
the data in a particular way. So I did:</p>
<pre tabindex="0"><code>form = MyForm(user=user)
cleaned_data = form.clean()
self.assertEqual(cleaned_data, expected_data)
</code></pre><p>Instead of passing, the test blew up:</p>
<pre tabindex="0"><code>AttributeError: 'MyForm' object has no attribute 'cleaned_data'
</code></pre><p>Why? Because the <code>clean()</code> method is called when you provide it with POST data
(normally&hellip; there are also other ways to populate forms). If you don&rsquo;t supply it data,
then <code>cleaned_data</code> doesn&rsquo;t get populated. The answer is to provide data to the form:</p>
<pre tabindex="0"><code>form = MyForm(user=user, data={})
cleaned_data = form.clean()
self.assertEqual(cleaned_data, expected_data)
</code></pre><p>And that works as expected. The reminder to myself is to always identify which mode of
the form you are testing, GET or POST.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jan 27, 2020
     - 1 minute read 
     - <a href="https://kurup.com/blog/2020/01/27/aws-xray-brain-dump/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/cheatsheet/">cheatsheet </a><a class="label" href="https://kurup.com/categories/aws/">aws </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2020/01/27/aws-xray-brain-dump/">AWS Xray brain dump</a>
  </h1>
</header>

        
          <p>These are very rough notes on how I got AWS Xray working in a kubernetes deployment.
Posting this mainly for my auxiliary brain.</p>
<p>First, set up an IAM role that allows nodes to access xray.</p>
<p>Following this blog post:
<a href="https://aws.amazon.com/blogs/compute/application-tracing-on-kubernetes-with-aws-x-ray/">https://aws.amazon.com/blogs/compute/application-tracing-on-kubernetes-with-aws-x-ray/</a></p>
<p>I cloned this repo:
<a href="https://github.com/aws-samples/aws-xray-kubernetes">https://github.com/aws-samples/aws-xray-kubernetes</a></p>
<p>Build the AWS Xray image:</p>
<pre tabindex="0"><code>cd xray-daemon/
docker build -t xray-daemon:latest .
</code></pre><p>THIS OUT OF DATE! try this: <a href="https://docs.aws.amazon.com/xray/latest/devguide/xray-daemon-ecs.html#xray-daemon-ecs-image">https://docs.aws.amazon.com/xray/latest/devguide/xray-daemon-ecs.html#xray-daemon-ecs-image</a></p>
<p>Create an AWS ECR repo:</p>
<pre tabindex="0"><code>aws ecr create-repository --repository-name xray-daemon
</code></pre><p>Login via docker:</p>
<pre tabindex="0"><code>aws ecr get-login --no-include-email
</code></pre><p>That command spits out a command which you can run that will log you into docker ^</p>
<p>Tag and push the image there:</p>
<pre tabindex="0"><code>docker tag xray-daemon:latest AWS-ACCOUNT-ID.dkr.ecr.us-east-1.amazonaws.com/xray-daemon:latest
docker push AWS-ACCOUNT-ID.dkr.ecr.us-east-1.amazonaws.com/xray-daemon:latest
</code></pre><p>You should now be able to see the image in the AWS ECR console</p>
<p>Update <code>aws-xray-kubernetes/xray-daemon/xray-k8s-daemonset.yaml</code>:</p>
<p>Change the image value to the image you just pushed</p>
<p>deploy it:</p>
<pre tabindex="0"><code>kubectl apply -f xray-k8s-daemonset.yaml
</code></pre>
        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Dec 11, 2019
     - 3 minute read 
     - <a href="https://kurup.com/blog/2019/12/11/we-have-always-lived-in-the-castle/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/book-review/">book-review </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2019/12/11/we-have-always-lived-in-the-castle/">We have always lived in the castle</a>
  </h1>
</header>

        
          <p>At school, Kavi is reading
<a href="https://amzn.to/2PctnQm">&ldquo;We have always lived in the castle&rdquo;</a>, by Shirley Jackson. I
read her short story,
<a href="https://www.newyorker.com/magazine/1948/06/26/the-lottery">&ldquo;The Lottery&rdquo;</a>, in high school. I
recall the main plot of the story, but I&rsquo;m sure I have forgotten many details.
What I <strong>haven&rsquo;t</strong> forgotten is the sense of shock I felt as the plot finally became
clear. As I&rsquo;m typing this, I wonder if that was more because I was young and new to
being shocked, or whether it was really shocking. In any case, that feeling of being
shocked by that story is deeply embedded inside me.</p>
<p>So I checked this book from the library and finished it today. It was dark and
disturbing, reminiscent of &ldquo;The Lottery&rdquo;. There were many elements of foreshadowing.
From the start, you wonder what Mary Katherine or her family did to sow such discontent
among the villagers, and the answer comes slowly, in bits and pieces. I wondered why
they had library books that they would never be able to return. In the end, I was sucked
in and couldn&rsquo;t put the book down until I figured it all out. Thankfully, it&rsquo;s a short
book.</p>
<p>Some random thoughts that my brain generated while reading this book (and that I&rsquo;d
prefer to remember someday):</p>
<ul>
<li>When Merrikat and Connie first enter their house after it was trashed by the village,
Merrikat is not surprised that the library books are intact because it&rsquo;s against the law
to damage library property. I smiled.</li>
<li>The absurdity of Merrikat&rsquo;s behavior at times struck me hard. The first time was when
she threw a glass pitcher on the floor because she was upset by a visitor talking to her
sister too much. I had to re-read that section a few times because it was written in an
almost off-hand way, as if this was normal behavior. She continues to behave like that
in bursts, and then the more absurd part becomes Connie&rsquo;s calm reaction to these
behaviors. Piece by piece, you get to understand more about how disturbed they are, and
why.</li>
<li>Merrikat&rsquo;s belief in magical powers that keep her safe are both hard to believe and
comforting. I kept waiting for someone to say one of her three magic words, as if that
was the only way that anything could go wrong.</li>
<li>I wanted Charles to be taught a lesson. I guess it happened, but a part of me wanted
it to be more dramatic and more crushing. I&rsquo;m a sucker for an evil character doing
clearly evil things and then getting caught red-handed and punished. I know that&rsquo;s
simplistic, but I still like it and am a little disappointed when I don&rsquo;t get that
satisfaction.</li>
</ul>
<p>I love the fact that I&rsquo;m finding books to enjoy, thanks to my kids. Life is good.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Nov 27, 2019
     - 1 minute read 
     - <a href="https://kurup.com/blog/2019/11/27/open-borders/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://kurup.com/categories/book-review/">book-review </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://kurup.com/blog/2019/11/27/open-borders/">Open Borders</a>
  </h1>
</header>

        
          <p>I just finished <a href="https://amzn.to/35FoTXV">Open Borders</a>, a graphic novel about immigration policy.
(Not 2 things that normally occupy the same sentence)</p>
<p>It was an excellent presentation of a position that I&rsquo;ve always felt to be morally correct, in my
heart of hearts. I am one of the few lucky ones who gets to be an American citizen just because of
the fact that my parents took it on themselves to forge a better life for us. Why shouldn&rsquo;t everyone
have this opportunity? This book shatters many of the myths that allowing open borders makes things
&ldquo;worse&rdquo; in any way for natives.</p>

        
      </article>
      
      
      






<div class="pagination">

  
  
  
  
  <a href="/" aria-label="First" class="label-pagination"><i class="fa fa-angle-double-left fa-lg"></i></a>
  

  
  
  <a href="/" aria-label="Previous" class="label-pagination"><i class="fa fa-angle-left fa-lg"></i></a>
  

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  
  <a href="/page/3/" aria-label="Next" class="label-pagination"><i class="fa fa-angle-right fa-lg"></i></a>
  

  
  
  <a href="/page/32/" aria-label="Last"><i class="fa fa-angle-double-right fa-lg"></i></a>
  

</div>

  
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>

  

  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      <a target="_blank" href="https://github.com/vkurup/" title="https://github.com/vkurup/"><i class="fa fa-github fa-3x"></i></a>
      
      
      <a target="_blank" href="https://twitter.com/vkurup/" title="https://twitter.com/vkurup/"><i class="fa fa-twitter fa-3x"></i></a>
      
      <a target="_blank" href="https://keybase.io/vkurup/" title="https://keybase.io/vkurup/"><i class="fa fa-keybase fa-3x"></i></a> 
      
      
      <a target="_blank" href="https://stackoverflow.com/users/347942" title="https://stackoverflow.com/users/347942"><i class="fa fa-stack-overflow fa-3x"></i></a>
      
      
      
      
      

      
      
    </li>
  </ul>

  

  

  
  
  
  
  <section class="even">
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      
      
      
      <li class="post">
        <a href="/blog/2024/04/14/my-fathers-paradise/">My Father&#39;s Paradise</a>
      </li>
      
      
      
      
      
      <li class="post">
        <a href="/blog/2024/04/09/civilwarland-in-bad-decline/">CivilWarLand in Bad Decline</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2024/04/08/choosing-to-run/">Choosing To Run</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2024/04/07/links-2024-04-07/">Links 2024-04-07</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2024/04/06/links-2024-04-06/">Links 2024-04-06</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2024/03/16/cory-doctorow-rabbit-hole/">Cory Doctorow Rabbit Hole</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2024/03/14/the-key-to-happiness-is-to-do-things-that-dont-make-you-happy/">The key to happiness is to do things that don&#39;t make you happy</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2022/08/16/three-tips-on-visiting-italy/">Three tips on visiting Italy!</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2021/12/26/usb-c-lint/">USB-C lint</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2021/11/27/loving-the-frame.work-laptop/">Loving the frame.work laptop</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2021/05/09/first-post-of-2021/">First Post of 2021</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/12/12/advent-of-code-elixir-day-1/">Advent of Code Elixir Day 1</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/12/11/install-multiple-python-versions-using-pyenv/">Install multiple python versions using pyenv</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/12/10/disk-space-hogs/">Disk Space Hogs</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/12/09/deleting-old-snaps/">Deleting old snaps</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/08/21/using-an-obi110-for-voip-service/">Using an OBi110 for VOIP service</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/08/17/django-forms-have-2-modes/">Django forms have 2 modes</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/01/27/aws-xray-brain-dump/">AWS Xray brain dump</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2019/12/11/we-have-always-lived-in-the-castle/">We have always lived in the castle</a>
      </li>
      
      
    </ul>
  </section>
  
  

  <section class="odd">
    <h1>My Pinboard</h1>
    <ul id="pinboard_linkroll">Fetching linkroll...</ul>
    <p><a href="http://pinboard.in/u:vkurup">My Pinboard Bookmarks &raquo;</a></p>
  </section>
  <script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; 
  var pinboard_user = "vkurup"; 
  var pinboard_count = 10; 
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/js/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
  </script>

</aside>
    
  </div>
</div>
<footer role="contentinfo">
  <p>Copyright &copy; 2024 Vinod Kurup, MD - <a href="https://kurup.com/license/">License</a> -
    <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
  </p>
</footer>






<script>
 var _gaq=[['_setAccount','UA-79447-1'],['_trackPageview']];
 (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
   g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
   s.parentNode.insertBefore(g,s)}(document,'script'));
</script>


<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "2f7b54393e3c4799ab8f37fcaf97e029"}'></script>
  </body>
</html>
   

