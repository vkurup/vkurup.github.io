<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

    
    
    
    <link href="//fonts.googleapis.com/css?family=Quattrocento:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Quattrocento+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
    
    

    
    <title>Vinod Kurup</title>

    
    
    <link rel="stylesheet" href="/css/hugo-octopress.css">

    
    
    <link rel="stylesheet" href="/css/vinod.css">
    

    
    <link rel="stylesheet" href="/css/fork-awesome.min.css">
    

    
    <link href="/favicon.ico" rel="icon">

    
    <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Vinod Kurup" />

    <meta name="description" content="Inside Vinod Kurup&#39;s brain" />
    <meta name="keywords" content="">
    <meta name="author" content="Vinod Kurup, MD">

    
    <meta name="generator" content="Hugo 0.80.0" />

    
    

    
    
  </head>
  <body>

    
    <header role="banner">
<hgroup>
  
  <h1><a href="https://vkurup.github.io/">Vinod Kurup</a></h1>
    <h2>Hospitalist/programmer in search of the meaning of life</h2>
</hgroup></header>

    
    <nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
    
    <option value="https://vkurup.github.io/">» Blog</option>
    
    <option value="https://vkurup.github.io/about/">» About Me</option>
    
    <option value="https://vkurup.github.io/post/">» Archives</option>
    
    <option value="https://vkurup.github.io/categories/">» Categories</option>
    
    <option value="https://vkurup.github.io/medicine/">» Medicine</option>
    
    <option value="https://vkurup.github.io/running/">» Running</option>
    
  </select>
</fieldset>


<ul class="main-navigation">
  
  
  
  <li><a href="https://vkurup.github.io/" title="Blog">Blog</a></li>
  
  
  
  <li><a href="https://vkurup.github.io/about/" title="About Me" >About Me</a></li>
  
  
  
  <li><a href="https://vkurup.github.io/post/" title="Archives" >Archives</a></li>
  
  
  
  <li><a href="https://vkurup.github.io/categories/" title="Categories" >Categories</a></li>
  
  
  
  <li><a href="https://vkurup.github.io/medicine/" title="Medicine" >Medicine</a></li>
  
  
  
  <li><a href="https://vkurup.github.io/running/" title="Running" >Running</a></li>
  
  
</ul>

<ul class="subscription">
  
  
  <a href="https://vkurup.github.io/index.xml" target="_blank" type="application/rss+xml" title="RSS"><i class="fa fa-rss fa-lg"></i></a>
  
  
</ul>


<form action="https://www.google.com/search" method="get" target="_blank">
  <fieldset role="search">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
    <input type="hidden" name="q" value="site:https://vkurup.github.io/" />
  </fieldset>
</form>

</nav>




  

<div id="main">
  <div id="content">
    <div class="blog-index">
      
      
      <article>
        
        

<header>
  <p class="meta">Jul 20, 2003
     - 1 minute read 
     - <a href="https://vkurup.github.io/blog/2003/07/20/aolserver-cgi-errors/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/aolserver/">aolserver </a><a class="label" href="https://vkurup.github.io/categories/web/">web </a><a class="label" href="https://vkurup.github.io/categories/programming/">programming </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/07/20/aolserver-cgi-errors/">AOLserver CGI errors</a>
  </h1>
</header>

        
          <p>Scenario: You&rsquo;re trying to run a CGI program under AOLserver and you see this in your error log:</p>
<pre><code>19/Jul/2003:00:00:23     Error: exec /home/vinod/cgi-bin/mt: execve() failed: Permission denied
19/Jul/2003:00:00:23     Error: waitpid(-3) failed: No child processes
19/Jul/2003:00:00:23     Error: nscgi: wait for /home/vinod/cgi-bin/mt failed: No child processes
</code></pre>
<p>I&rsquo;m trying to run <code>/home/vinod/cgi-bin/mt/mt.cgi</code>. Why isn&rsquo;t this working? Because I need to tell AOLserver about each and every directory which might contain CGI programs.</p>
<p>So I need to change my <code>nsd.tcl</code> from:</p>
<pre><code>ns_section &quot;ns/server/${server}/module/nscgi&quot;
ns_param   map &quot;GET  /cgi-bin /home/${user_account}/cgi-bin/&quot; 
ns_param   map &quot;POST /cgi-bin /home/${user_account}/cgi-bin/&quot; 
ns_param   Interps CGIinterps
</code></pre>
<p>to</p>
<pre><code>ns_section &quot;ns/server/${server}/module/nscgi&quot;
ns_param   map &quot;GET  /cgi-bin /home/${user_account}/cgi-bin/&quot;
ns_param   map &quot;POST /cgi-bin /home/${user_account}/cgi-bin/&quot;
ns_param   map &quot;GET  /cgi-bin/mt /home/${user_account}/cgi-bin/mt&quot; 
ns_param   map &quot;POST /cgi-bin/mt /home/${user_account}/cgi-bin/mt&quot; 
ns_param   Interps CGIinterps
</code></pre>
<p>Problem solved. Further reading: <a href="http://jongriffin.com/static/consultant/nscgi">http://jongriffin.com/static/consultant/nscgi</a> -  sure wish I had read that before I started messing with ns_cgi.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 20, 2003
     - 3 minute read 
     - <a href="https://vkurup.github.io/blog/2003/07/20/updating-from-cvs/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/openacs/">openacs </a><a class="label" href="https://vkurup.github.io/categories/version-control/">version-control </a><a class="label" href="https://vkurup.github.io/categories/programming/">programming </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/07/20/updating-from-cvs/">Updating from CVS</a>
  </h1>
</header>

        
          <p>Here&rsquo;s the steps I take in order to update my site from the latest OpenACS CVS. All of this info comes from <a href="http://piskorski.com/docs/cvs-conventions.html">Andrew Piskorski&rsquo;s great CVS page</a> or from pages listed in his document.</p>
<ol>
<li>
<p>Make sure that I&rsquo;ve committed all the local changes that I&rsquo;ve made.</p>
<p>vinod:~$ cd web/kurup
vinod:~/web/kurup$ cvs commit -m &ldquo;Fixed foo, bar and blah&rdquo;</p>
</li>
<li>
<p>Go into the directory containing my OpenACS CVS checkout and grab the latest sources. I&rsquo;m using the <code>oacs-4-6</code> branch.</p>
<p>vinod:~/web/kurup$ cd ~/web/openacs-4
vinod:~/web/openacs-4$ cvs update -r oacs-4-6</p>
</li>
<li>
<p>Import the code into a vendor branch. My repository name is <code>kurup</code>. <code>OpenACS</code> is the vendor tag.</p>
<p>vinod:~/web/openacs-4$ cvs -d /var/lib/cvs \
import -m &ldquo;importing latest OpenACS 4.6 branch&rdquo;<br>
kurup OpenACS openacs-4-6-3-20030719</p>
</li>
<li>
<p>This produces the usual CVS scroll and then a message like this:</p>
<p>7 conflicts created by this import. Use the following command to help the merge:
cvs -d /var/lib/cvs checkout -j&lt;prev_rel_tag&gt; \
jopenacs-4-6-3-20030719 kurup</p>
</li>
<li>
<p>Follow the instructions just given above. This will checkout a full set of code into the <code>kurup</code> directory, while simultaneously merging the new imported code in.</p>
<p>vinod@vkurup:~/web/openacs-4$ cd
vinod@vkurup:~$ mkdir tmp
vinod@vkurup:~$ cd tmp
vinod@vkurup:~/tmp$ cvs -d /var/lib/cvs checkout \
-jOpenACS:yesterday<br>
jopenacs-4-6-3-20030719 kurup</p>
</li>
<li>
<p>Go through and fix all the conflicts. This is the part that I sometimes find confusing. How to find the files that have conflicts? The command in instruction #3 above will list conflict files with a C in front of the filename. Check each file that has a C in front of it. This is why I like to do this process inside an emacs shell, so that I can look over the output as needed. For example, one piece of my listing looked like this:</p>
<p>U kurup/packages/lars-blogger/www/blog-oracle.xql
U kurup/packages/lars-blogger/www/blog.adp
C kurup/packages/lars-blogger/www/blog.tcl
U kurup/packages/lars-blogger/www/calendar-oracle.xql</p>
</li>
</ol>
<p>So, I need to check ~/tmp/kurup/packages/lars-blogger/www/blog.tcl, look for conflict markers and resolve any conflicts. Do this for every file marked &lsquo;C&rsquo; in your listing.</p>
<ol start="7">
<li>
<p>Commit my work.</p>
<p>vinod:~/tmp$ cd kurup
vinod:~/tmp/kurup$ cvs commit<br>
-m &ldquo;merged with openacs-4-6-3-20030719, conflicts resolved&rdquo;</p>
</li>
<li>
<p>Blow away that tmp checkout</p>
<p>vinod:~/tmp/kurup$ cd
vinod:~$ rm -r tmp</p>
</li>
<li>
<p>Update my local checkout</p>
<p>vinod:~$ cd web/kurup
vinod:~/web/kurup$ cvs update</p>
</li>
<li>
<p>Restart my server.</p>
<p>vinod:~$ svc -t /service/master</p>
</li>
<li>
<p>Once the server is back up, I visit <code>http://kurup.org/acs-admin/apm</code> with my broswer and click on &lsquo;Install Packages&rsquo;. I look for any packages that are listed as &lsquo;Upgrade&rsquo;. Click on these packages and follow the instructions to perform any needed upgrades. This is always a touchy process because if the upgrade script errors out, your server may be left in an in-between state. Hope and pray liberally.</p>
</li>
<li>
<p>Repeat as needed, maybe monthly, or whenever there&rsquo;s a new feature/bugfix available that you need.</p>
</li>
</ol>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 16, 2003
     - 2 minute read 
     - <a href="https://vkurup.github.io/blog/2003/07/16/setting-up-wep/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/sysadmin/">sysadmin </a><a class="label" href="https://vkurup.github.io/categories/wireless/">wireless </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/07/16/setting-up-wep/">Setting up WEP</a>
  </h1>
</header>

        
          <p>How to set up WEP encryption:</p>
<ul>
<li>SMC Barricade Basestation</li>
<li>Airport Extreme Wireless Card</li>
<li>Mac OS X 10.2.6</li>
</ul>
<p>Note that if things don&rsquo;t go 100% right, you may lock yourself out of your wireless network. Be sure you know how to get back in before you follow any of these instructions.</p>
<ol>
<li>Set up non-encrypted transmission first. Make sure you can connect to your basestation and surf on the internet.</li>
<li>Visit your basestation&rsquo;s URL - default is http://198.168.123.254</li>
<li>Log in (You <strong>have</strong> changed the password so it&rsquo;s not &lsquo;admin&rsquo;, right?)</li>
<li>Click on Wireless.</li>
<li>Create a Network ID (SSID). I&rsquo;ve read that <a href="http://www.whiterabbits.com/MacNetJournal/stories/2002/03/20/aWeekofWireless.html">leaving it at &lsquo;default&rsquo; sometimes causes problems</a>, so change it.</li>
<li>Check the &lsquo;Enable IEEE 128 bit Shared Key security&rsquo; radio button</li>
<li>Now we need to enter a key. This should be a 26 digit Hex code. Simply go to the <a href="http://www.warewolflabs.com/portfolio/programming/wepskg/wepskg.html">magic WEP Strong Key Generator</a>. Click on &lsquo;generate 128 bit key&rsquo; and scroll down to see your new key. Pick the one labeled HEX. Enter this value as &lsquo;WEP Key 1&rsquo;. Keep this key visible somewhere, since you&rsquo;ll need to feed it to your Mac so you can login.</li>
<li>Click &lsquo;Save&rsquo; and then &lsquo;Reboot&rsquo; your wireless router.</li>
<li>OK, now you&rsquo;re locked out of your basestation. Let&rsquo;s get back in.</li>
<li>Click on the Airport Icon in the menubar. Choose &lsquo;Turn Airport Off&rsquo;. Wait a few seconds and then click &lsquo;Turn Airport On&rsquo;.</li>
<li>Wait a few seconds for your Mac to recognize your network. Then, click on the Airport icon again and choose your Network-ID. A password box should pop up.</li>
<li>Click the drop-down menu and choose &lsquo;128 bit Key&rsquo; and then re-enter your 26-digit HEX key. And no, copy and paste won&rsquo;t work - you need to enter it digit by digit. Check the &lsquo;Keychain&rsquo; box so that you don&rsquo;t have to re-enter that hideous key each time.</li>
</ol>
<p>Enjoy your new encrypted network!</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 15, 2003
     - 1 minute read 
     - <a href="https://vkurup.github.io/blog/2003/07/15/oh-the-pain/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/pain/">pain </a><a class="label" href="https://vkurup.github.io/categories/running/">running </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/07/15/oh-the-pain/">oh, the pain!</a>
  </h1>
</header>

        
          <p>Ugh&hellip; I woke up this morning with a nagging pain in my right knee. It kinda improved through the day, so I wasn&rsquo;t too worried about it, but when I tried to run on it this evening, it really hurt. So I&rsquo;m gonna keep to the bike for awhile. I remember having this problem (which I think is <a href="http://www.emedx.com/emedx/diagnosis_information/knee_disorders/patellar_tendonitis_outline.htm">patellar tendonitis</a>) during the <a href="/blog/2000/10/23/marathon">last marathon</a> and I remember that it got better pretty quick, so I&rsquo;m praying it&rsquo;s the same this time.</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 12, 2003
     - 1 minute read 
     - <a href="https://vkurup.github.io/blog/2003/07/12/marriage-tames-genius/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/uncategorized/">uncategorized </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/07/12/marriage-tames-genius/">marriage &#39;tames&#39; genius</a>
  </h1>
</header>

        
          <p>Ha! I found another reason not to get married. Apparently, <a href="http://cooltech.iafrica.com/science/252552.htm">marriage quelches genius</a>. On the other hand, if I got married, I could blame marriage for the fact that I&rsquo;m not a genius&hellip;</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 5, 2003
     - 1 minute read 
     - <a href="https://vkurup.github.io/blog/2003/07/05/more-mail-woes/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/sysadmin/">sysadmin </a><a class="label" href="https://vkurup.github.io/categories/mail/">mail </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/07/05/more-mail-woes/">More Mail Woes</a>
  </h1>
</header>

        
          <p>I spent most of this afternoon struggling with a mail issue and I didn&rsquo;t find it documented well anywhere else, so I&rsquo;m going to write about it here in the hopes that it might help someone else.</p>
<p><strong>What I was trying to do:</strong> Setup qmail + vpopmail + courier imap for imap and pop3d</p>
<p><strong>Problem I was having:</strong> For some users, checking POP3 mail would work for a while (about 5 minutes), but then would fail:</p>
<pre><code>      Jul  5 00:30:34 vkurup pop3d: LOGIN FAILED, ip=[::ffff:68.173.27.35]
      Jul  5 00:30:34 vkurup pop3d: Disconnected, ip=[::ffff:68.173.27.35]
</code></pre>
<p>The failure would only happen for users who had vpopmail accounts <strong>and</strong> shell accounts. Users who have only vpopmail accounts were fine.</p>
<p>Eventually, after much searching, I found this <a href="http://bluedot.net/mail/archive/read.php?f=2&amp;i=10881&amp;t=10880">message</a> which advised to configure courier-imap with <code>--without-authdaemon</code>. This solved my problem.</p>
<p>According to the author of courier-imap, <a href="http://sourceforge.net/mailarchive/forum.php?thread_id=2388144&amp;forum_id=33081">this problem is solved in newer versions of vpopmail</a>, but he mentions version 5.3.38 and I could only find version 5.3.20, so I didn&rsquo;t try that fix.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jul 2, 2003
     - 1 minute read 
     - <a href="https://vkurup.github.io/blog/2003/07/02/core-mac-os-x-and-unix-programming/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/mac-os-x/">mac-os-x </a><a class="label" href="https://vkurup.github.io/categories/bork/">bork </a><a class="label" href="https://vkurup.github.io/categories/programming/">programming </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/07/02/core-mac-os-x-and-unix-programming/">Core Mac OS X and UNIX Programming</a>
  </h1>
</header>

        
          <p>Not only has <a href="http://badgertronics.com/blog">MarkD</a> produced a <a href="http://borkware.com/corebook/">book</a>, but he&rsquo;s made <a href="http://slashdot.org/article.pl?sid=03/07/01/1636204">SlashDot</a> as well. Guess it&rsquo;s about time to retire now&hellip;</p>
<p>I&rsquo;m going to get it eventually, but I&rsquo;m still working my way through
<a href="http://www.amazon.com/gp/product/0321503619?ie=UTF8&amp;tag=vinodkurupshomep&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0321503619">Cocoa Programming for Mac OS X</a></p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jun 29, 2003
     - 1 minute read 
     - <a href="https://vkurup.github.io/blog/2003/06/29/do-not-call/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/do-not-call/">do-not-call </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/06/29/do-not-call/">Do Not Call</a>
  </h1>
</header>

        
          <p>I&rsquo;m going to sign up for the <a href="http://donotcall.gov/">National Do-Not-Call Registry</a>, but I&rsquo;m not sure that it&rsquo;s going to reduce the number of calls I get. Look at the <a href="http://www.ftc.gov/bcp/conline/pubs/alerts/dncalrt.htm#Exceptions">exemption list</a>:</p>
<blockquote>
<p>Exempt businesses include:</p>
<ul>
<li>long-distance phone companies</li>
<li>airlines</li>
<li>banks and credit unions; and</li>
<li>the business of insurance, to the extent that it is regulated by state law.</li>
</ul>
<p>However, many telemarketing calls are placed by professional telemarketing companies, and even if the company whose goods or services are being sold is exempt, the telemarketing company may be covered.</p>
<p>You may still receive calls from political organizations, charities, telephone surveyors or companies with which you have an existing business relationship.</p>
</blockquote>
<p>The list of telemarketers who don&rsquo;t fit into the exemption list seems kinda small to me&hellip;</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jun 29, 2003
     - 2 minute read 
     - <a href="https://vkurup.github.io/blog/2003/06/29/me-vs.-daemontools/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/daemontools/">daemontools </a><a class="label" href="https://vkurup.github.io/categories/sysadmin/">sysadmin </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/06/29/me-vs.-daemontools/">me vs. daemontools</a>
  </h1>
</header>

        
          <p>I have a love/hate relationship with <a href="http://cr.yp.to/daemontools.html">daemontools</a>. It&rsquo;s powerful way to manage services (like web servers and mail servers), but it sometimes doesn&rsquo;t act the way I expect it to.</p>
<p>Today, I tried to set up <a href="http://cr.yp.to/qmail.html">qmail-pop3d</a>. I set up a directory called <code>/var/qmail/supervise/qmail-pop3d</code> and put a file named &lsquo;run&rsquo; inside it. This contained:</p>
<pre><code>#!/bin/sh
PATH=/var/qmail/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/bin
export PATH

tcpserver -H -R 0 pop-3 
/var/qmail/bin/qmail-popup vkurup.acornhosting.net 
/home/vpopmail/bin/vchkpw /var/qmail/bin/qmail-pop3d Maildir &amp;
</code></pre>
<p>Then I connected the run script to my /service directory</p>
<pre><code># ln -s /var/qmail/supervise/qmail-pop3d /service
</code></pre>
<p>Then I checked to see if it was running:</p>
<pre><code># svstat /service/qmail-pop3d
/service/qmail-pop3d: up (pid 13524) 0 seconds
</code></pre>
<p>Hmmm&hellip; up 0 seconds. That&rsquo;s not right - it should be at least 5 or 6 seconds (I can&rsquo;t type <strong>that</strong> fast). That usually means that the service is repeatedly failing and restarting itself.</p>
<p>ps shows that qmail-pop3d is running, but trying to connect to port 110 doesn&rsquo;t work:</p>
<pre><code>$ telnet localhost 110
Trying 127.0.0.1...
telnet: Unable to connect to remote host: Connection timed out
</code></pre>
<p>And now I&rsquo;m stuck. Nothing is getting logged to the qmail-pop3d logs. After some headbanging, I do another <code>ps -ax</code> and this time notice a process called readproctitle:</p>
<pre><code>11919 ?        S      0:05 readproctitle service errors: ...lready used?tcpserve
r: fatal: unable to bind: address already used?tcpserver: fatal: unable to bind:
 address already used?tcpserver: fatal: unable to bind: address already used?tcp
server: fatal: unable to bind: address already used?tcpserver: fatal: unable to 
bind: address already used?tcpserver: fatal: unable to bind: address already use
d?tcpserver: fatal: unable to bind: address already used?
</code></pre>
<p>What&rsquo;s that? I look it up and find that <a href="http://cr.yp.to/daemontools/readproctitle.html">readproctitle</a> is a kind of scrolling-log for daemontools which shows up when you run <code>ps</code>. So, it looks like <code>qmail-pop3d</code> failing because it&rsquo;s trying to bind port 110 even though it&rsquo;s already been bound. So this makes me thing that <code>qmail-pop3d</code> isn&rsquo;t failing, but that it&rsquo;s running over and over again. And then I look back at my run script and look at that pesky little &lsquo;&amp;&rsquo; at the end. Doh! That tells the process to detach once it starts. It starts normally, then detaches. Once it detaches, daemontools thinks it&rsquo;s down, so it tries to start it again. (At least that&rsquo;s the way I understand it). Getting rid of the &lsquo;&amp;&rsquo; and adding &lsquo;exec&rsquo; to the beginning fixes it and everything works now.</p>
<p>Me: 1 Daemontools: 2123</p>

        
      </article>
      
      <article>
        
        

<header>
  <p class="meta">Jun 28, 2003
     - 2 minute read 
     - <a href="https://vkurup.github.io/blog/2003/06/28/compiling-vpopmail/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="https://vkurup.github.io/categories/sysadmin/">sysadmin </a><a class="label" href="https://vkurup.github.io/categories/mail/">mail </a>
    
  </p>
  <h1 class="entry-title">
    <a href="https://vkurup.github.io/blog/2003/06/28/compiling-vpopmail/">compiling vpopmail</a>
  </h1>
</header>

        
          <p>I&rsquo;m setting up <a href="http://inter7.com/vpopmail.html">vpopmail</a> 5.2.1 - a POP3 email manager for qmail, but it won&rsquo;t compile out of the box.</p>
<pre><code>gcc -I. -Icdb -g -O2 -Wall -c vconvert.c 
In file included from vconvert.c:35: vmysql.h:53:22: missing terminating &quot; character 
vmysql.h:60:35: missing terminating &quot; character 
make[2]: *** [vconvert.o] Error 1 
make[2]: Leaving directory `/usr/local/src/vpopmail-5.2.1' 
make[1]: *** [all-recursive] Error 1 
make[1]: Leaving directory `/usr/local/src/vpopmail-5.2.1' 
make: *** [all-recursive-am] Error 2 
</code></pre>
<p>Whenever <code>make</code> gives you an error, look for the first error you can find. Any errors after that often fix themselves once you fix the first error.  The relevant code is here, (vmysql.h, starting at line 42):</p>
<pre><code>42: #ifdef CLEAR_PASS 
43: #define TABLE_LAYOUT &quot;pw_name char(32) not null, \ 
44: pw_domain char(64) not NULL, \ 
45: pw_passwd char(40), \ 
46: pw_uid int, pw_gid int, \ 
47: pw_gecos char(48), \ 
48: pw_dir char(160), \ 
49: pw_shell char(20), \ 
50: pw_clear_passwd char(16), \ 
51: primary key (pw_name, pw_domain ) &quot; 
52: #else 
53: #define TABLE_LAYOUT &quot;pw_name char(32) not null, \ 
54: pw_domain char(64) not null, 
55: pw_passwd char(40), \ 
56: pw_uid int, pw_gid int, \ 
57: pw_gecos char(48), \ 
58: pw_dir char(160), 
59: pw_shell char(20), \ 
60: primary key (pw_name, pw_domain ) &quot; 
61: #endif
</code></pre>
<p>Looking around line 53, I see that line 54 and line 58 are missing backslashes - adding &lsquo;em back in fixes the error. The interesting thing to me is that version 5.2.1 has been out for over a year and, according to <a href="http://www.mail-archive.com/vchkpw@inter7.com/msg12238.html">an email on the vpopmail list</a>, this error still persists in more recent versions. How come this bug hasn&rsquo;t bitten anyone else? I suppose it&rsquo;s because the install docs recommend setting CLEAR_PASS (see line 42), which would cause the compiler to miss the bug. Or maybe I&rsquo;m just lucky</p>

        
      </article>
      
      
      






<div class="pagination">

  
  
  
  
  <a href="/" aria-label="First" class="label-pagination"><i class="fa fa-angle-double-left fa-lg"></i></a>
  

  
  
  <a href="/page/26/" aria-label="Previous" class="label-pagination"><i class="fa fa-angle-left fa-lg"></i></a>
  

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

  
  
  <a href="/page/28/" aria-label="Next" class="label-pagination"><i class="fa fa-angle-right fa-lg"></i></a>
  

  
  
  <a href="/page/31/" aria-label="Last"><i class="fa fa-angle-double-right fa-lg"></i></a>
  

</div>

  
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    

    <p>
      
    </p>
  </section>

  

  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      <a target="_blank" href="https://github.com/vkurup/" title="https://github.com/vkurup/"><i class="fa fa-github fa-3x"></i></a>
      
      
      <a target="_blank" href="https://twitter.com/vkurup/" title="https://twitter.com/vkurup/"><i class="fa fa-twitter fa-3x"></i></a>
      
      <a target="_blank" href="https://keybase.io/vkurup/" title="https://keybase.io/vkurup/"><i class="fa fa-keybase fa-3x"></i></a> 
      
      
      <a target="_blank" href="https://stackoverflow.com/users/347942" title="https://stackoverflow.com/users/347942"><i class="fa fa-stack-overflow fa-3x"></i></a>
      
      
      
      
      

      
      
    </li>
  </ul>

  

  

  
  
  
  
  <section class="even">
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      
      
      
      
      
      <li class="post">
        <a href="/blog/2021/12/26/usb-c-lint/">USB-C lint</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2021/11/27/loving-the-frame.work-laptop/">Loving the frame.work laptop</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2021/05/09/first-post-of-2021/">First Post of 2021</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/12/12/advent-of-code-elixir-day-1/">Advent of Code Elixir Day 1</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/12/11/install-multiple-python-versions-using-pyenv/">Install multiple python versions using pyenv</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/12/10/disk-space-hogs/">Disk Space Hogs</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/12/09/deleting-old-snaps/">Deleting old snaps</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/08/21/using-an-obi110-for-voip-service/">Using an OBi110 for VOIP service</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/08/17/django-forms-have-2-modes/">Django forms have 2 modes</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2020/01/27/aws-xray-brain-dump/">AWS Xray brain dump</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2019/12/11/we-have-always-lived-in-the-castle/">We have always lived in the castle</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2019/11/27/open-borders/">Open Borders</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2019/11/18/deep-survival-d%C3%A9j%C3%A0-vu/">Deep Survival Déjà Vu</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2019/11/17/ports-and-networks/">Ports and networks</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2019/11/17/hugo/">Hugo</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2019/04/08/avik-730/">Avik 7:30</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/12/20/triangle-race-series/">Triangle Race Series</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/12/02/my-nest-journey/">My Nest Journey</a>
      </li>
      
      
      
      <li class="post">
        <a href="/blog/2018/09/23/composting/">Composting</a>
      </li>
      
      
    </ul>
  </section>
  
  

  <section class="odd">
    <h1>My Pinboard</h1>
    <ul id="pinboard_linkroll">Fetching linkroll...</ul>
    <p><a href="http://pinboard.in/u:vkurup">My Pinboard Bookmarks &raquo;</a></p>
  </section>
  <script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; 
  var pinboard_user = "vkurup"; 
  var pinboard_count = 10; 
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/js/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
  </script>

</aside>
    
  </div>
</div>
<footer role="contentinfo">
  <p>Copyright &copy; 2021 Vinod Kurup, MD - <a href="https://vkurup.github.io/license/">License</a> -
    <span class="credit">Powered by <a target="_blank" href="https://gohugo.io">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/">Hugo-Octopress</a> theme.
  </p>
</footer>






<script>
 var _gaq=[['_setAccount','UA-79447-1'],['_trackPageview']];
 (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
   g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
   s.parentNode.insertBefore(g,s)}(document,'script'));
</script>


<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "2f7b54393e3c4799ab8f37fcaf97e029"}'></script>
  </body>
</html>
   

